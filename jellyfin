{
  "id":"jellyfin",
  "name":"Jellyfin",
  "version":"2025-11-23-1",
  "description":"Jellyfin",
  "media":[
    "movies",
    "series"
  ],
  "type":[
    "catalogues",
    "details",
    "stream"
  ],
  "website":"https://github.com/klucon/jellyfin_connector",
  "author":"panzerman",
  "baseUrl":"http://{server}",
  "responseFormat":"json",
  "config":{
    "server":{
      "type":"string",
      "label":"Jellyfin Server (IP/URL)",
      "placeholder":"192.168.0.100:8096",
      "required":true
    },
    "useLogin":{
      "type":"boolean",
      "label":"Použít přihlášení (username + heslo)?",
      "default":true
    },
    "username":{
      "type":"string",
      "label":"Uživatelské jméno",
      "required":true
    },
    "password":{
      "type":"string",
      "label":"Heslo",
      "required":true
    }
  },
  "auth":{
    "steps":[
      {
        "name":"salt",
        "method":"POST",
        "url":"/salt/",
        "body":{
          "username_or_email":"{login}"
        },
        "response":{
          "storeAs":"salt",
          "path":"response.salt",
          "status":{
            "path":"response.code",
            "states":{
              "ok":"OK",
              "userNotFound":"SALT_FATAL_1"
            }
          }
        }
      },
      {
        "name":"login",
        "method":"POST",
        "url":"/login/",
        "body":{
          "username_or_email":"{login}",
          "password":"sha1(md5_crypt({password}, {salt}))",
          "keep_logged_in":"1"
        },
        "response":{
          "tokenPath":"response.token",
          "status":{
            "path":"response.code",
            "states":{
              "autherror":"LOGIN_FATAL_1"
            }
          }
        },
        "storeTokenAs":"authToken"
      }
    ]
  }
}
